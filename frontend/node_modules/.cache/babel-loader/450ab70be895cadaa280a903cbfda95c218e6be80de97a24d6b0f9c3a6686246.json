{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{auth,db,increment}from\"../firebase\";import{collection,getDocs,updateDoc,doc}from\"firebase/firestore\";import{onAuthStateChanged,signOut}from\"firebase/auth\";import{useNavigate}from\"react-router-dom\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faSignOutAlt}from\"@fortawesome/free-solid-svg-icons\";import\"../css/plugins.css\";import Copyright from\"./copyright\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Plugins=()=>{var _user$reloadUserInfo;const[gists,setGists]=useState([]);const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[showOptions,setShowOptions]=useState(false);const navigate=useNavigate();useEffect(()=>{const unsubscribe=onAuthStateChanged(auth,user=>{if(user){setUser(user);fetchGists();}else{navigate(\"/signin\");}});return()=>unsubscribe();},[navigate]);const fetchGists=async()=>{const snapshot=await getDocs(collection(db,\"gists\"));const gistsData=snapshot.docs.map(doc=>({id:doc.id,...doc.data()}));setGists(gistsData);setLoading(false);};const handleLike=async gistId=>{const gistRef=doc(db,\"gists\",gistId);await updateDoc(gistRef,{like:increment(1)});fetchGists();};const handleDislike=async gistId=>{const gistRef=doc(db,\"gists\",gistId);await updateDoc(gistRef,{dislike:increment(1)});fetchGists();};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loader\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"spinner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rect1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rect2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rect3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rect4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rect5\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsx(\"img\",{src:user===null||user===void 0?void 0:user.photoURL,alt:user===null||user===void 0?void 0:user.displayName,className:\"avatar\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Welcome, \",user===null||user===void 0?void 0:user.displayName,\" (\",user===null||user===void 0?void 0:(_user$reloadUserInfo=user.reloadUserInfo)===null||_user$reloadUserInfo===void 0?void 0:_user$reloadUserInfo.screenName,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"menu\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>signOut(auth),className:\"action-button\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faSignOutAlt}),\" Logout\"]})})]}),gists.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-plugins\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Oops, no plugins found!\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"gist-grid\",children:gists.map(gist=>/*#__PURE__*/_jsxs(\"div\",{className:\"gist-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"gist-info\",children:[/*#__PURE__*/_jsx(\"img\",{src:gist.owner.avatar_url,alt:gist.owner.login,className:\"gist-avatar\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"gist-author\",children:gist.owner.login}),/*#__PURE__*/_jsx(\"div\",{className:\"gist-description\",children:gist.description})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleLike(gist.id),className:\"like-button\",children:[\"Like (\",gist.like,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleDislike(gist.id),className:\"dislike-button\",children:[\"Dislike (\",gist.dislike,\")\"]})]})]},gist.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex justify-center\",children:/*#__PURE__*/_jsx(Copyright,{})})]});};export default Plugins;","map":{"version":3,"names":["React","useState","useEffect","auth","db","increment","collection","getDocs","updateDoc","doc","onAuthStateChanged","signOut","useNavigate","FontAwesomeIcon","faSignOutAlt","Copyright","jsx","_jsx","jsxs","_jsxs","Plugins","_user$reloadUserInfo","gists","setGists","user","setUser","loading","setLoading","showOptions","setShowOptions","navigate","unsubscribe","fetchGists","snapshot","gistsData","docs","map","id","data","handleLike","gistId","gistRef","like","handleDislike","dislike","className","children","src","photoURL","alt","displayName","reloadUserInfo","screenName","onClick","icon","length","gist","owner","avatar_url","login","description"],"sources":["/workspaces/alpha-github-oauth/frontend/src/pages/Plugins.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { auth, db, increment } from \"../firebase\";\r\nimport { collection, getDocs, updateDoc, doc } from \"firebase/firestore\";\r\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faSignOutAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport \"../css/plugins.css\";\r\nimport Copyright from \"./copyright\";\r\n\r\nconst Plugins = () => {\r\n  const [gists, setGists] = useState([]);\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showOptions, setShowOptions] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\r\n      if (user) {\r\n        setUser(user);\r\n        fetchGists();\r\n      } else {\r\n        navigate(\"/signin\");\r\n      }\r\n    });\r\n    return () => unsubscribe();\r\n  }, [navigate]);\r\n\r\n  const fetchGists = async () => {\r\n    const snapshot = await getDocs(collection(db, \"gists\"));\r\n    const gistsData = snapshot.docs.map((doc) => ({\r\n      id: doc.id,\r\n      ...doc.data(),\r\n    }));\r\n    setGists(gistsData);\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleLike = async (gistId) => {\r\n    const gistRef = doc(db, \"gists\", gistId);\r\n    await updateDoc(gistRef, { like: increment(1) });\r\n    fetchGists();\r\n  };\r\n\r\n  const handleDislike = async (gistId) => {\r\n    const gistRef = doc(db, \"gists\", gistId);\r\n    await updateDoc(gistRef, { dislike: increment(1) });\r\n    fetchGists();\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loader\">\r\n        <div className=\"spinner\">\r\n          <div className=\"rect1\"></div>\r\n          <div className=\"rect2\"></div>\r\n          <div className=\"rect3\"></div>\r\n          <div className=\"rect4\"></div>\r\n          <div className=\"rect5\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"main\">\r\n        <div className=\"header\">\r\n          <div className=\"profile\">\r\n            <img\r\n              src={user?.photoURL}\r\n              alt={user?.displayName}\r\n              className=\"avatar\"\r\n            />\r\n            <span>\r\n              Welcome, {user?.displayName} ({user?.reloadUserInfo?.screenName})\r\n            </span>\r\n          </div>\r\n          <div className=\"menu\">\r\n            <button onClick={() => signOut(auth)} className=\"action-button\">\r\n              <FontAwesomeIcon icon={faSignOutAlt} /> Logout\r\n            </button>\r\n          </div>\r\n        </div>\r\n        {gists.length === 0 ? (\r\n          <div className=\"no-plugins\">\r\n            <h2>Oops, no plugins found!</h2>\r\n          </div>\r\n        ) : (\r\n          <div className=\"gist-grid\">\r\n            {gists.map((gist) => (\r\n              <div key={gist.id} className=\"gist-card\">\r\n                <div className=\"gist-info\">\r\n                  <img\r\n                    src={gist.owner.avatar_url}\r\n                    alt={gist.owner.login}\r\n                    className=\"gist-avatar\"\r\n                  />\r\n                  <div>\r\n                    <div className=\"gist-author\">{gist.owner.login}</div>\r\n                    <div className=\"gist-description\">{gist.description}</div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"buttons\">\r\n                  <button\r\n                    onClick={() => handleLike(gist.id)}\r\n                    className=\"like-button\"\r\n                  >\r\n                    Like ({gist.like})\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDislike(gist.id)}\r\n                    className=\"dislike-button\"\r\n                  >\r\n                    Dislike ({gist.dislike})\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"w-full flex justify-center\">\r\n        <Copyright />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Plugins;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,CAAEC,EAAE,CAAEC,SAAS,KAAQ,aAAa,CACjD,OAASC,UAAU,CAAEC,OAAO,CAAEC,SAAS,CAAEC,GAAG,KAAQ,oBAAoB,CACxE,OAASC,kBAAkB,CAAEC,OAAO,KAAQ,eAAe,CAC3D,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,eAAe,KAAQ,gCAAgC,CAChE,OAASC,YAAY,KAAQ,mCAAmC,CAChE,MAAO,oBAAoB,CAC3B,MAAO,CAAAC,SAAS,KAAM,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpC,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,KAAAC,oBAAA,CACpB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGtB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACuB,IAAI,CAAEC,OAAO,CAAC,CAAGxB,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACyB,OAAO,CAAEC,UAAU,CAAC,CAAG1B,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC2B,WAAW,CAAEC,cAAc,CAAC,CAAG5B,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAAA6B,QAAQ,CAAGlB,WAAW,CAAC,CAAC,CAE9BV,SAAS,CAAC,IAAM,CACd,KAAM,CAAA6B,WAAW,CAAGrB,kBAAkB,CAACP,IAAI,CAAGqB,IAAI,EAAK,CACrD,GAAIA,IAAI,CAAE,CACRC,OAAO,CAACD,IAAI,CAAC,CACbQ,UAAU,CAAC,CAAC,CACd,CAAC,IAAM,CACLF,QAAQ,CAAC,SAAS,CAAC,CACrB,CACF,CAAC,CAAC,CACF,MAAO,IAAMC,WAAW,CAAC,CAAC,CAC5B,CAAC,CAAE,CAACD,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAE,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAA1B,OAAO,CAACD,UAAU,CAACF,EAAE,CAAE,OAAO,CAAC,CAAC,CACvD,KAAM,CAAA8B,SAAS,CAAGD,QAAQ,CAACE,IAAI,CAACC,GAAG,CAAE3B,GAAG,GAAM,CAC5C4B,EAAE,CAAE5B,GAAG,CAAC4B,EAAE,CACV,GAAG5B,GAAG,CAAC6B,IAAI,CAAC,CACd,CAAC,CAAC,CAAC,CACHf,QAAQ,CAACW,SAAS,CAAC,CACnBP,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAED,KAAM,CAAAY,UAAU,CAAG,KAAO,CAAAC,MAAM,EAAK,CACnC,KAAM,CAAAC,OAAO,CAAGhC,GAAG,CAACL,EAAE,CAAE,OAAO,CAAEoC,MAAM,CAAC,CACxC,KAAM,CAAAhC,SAAS,CAACiC,OAAO,CAAE,CAAEC,IAAI,CAAErC,SAAS,CAAC,CAAC,CAAE,CAAC,CAAC,CAChD2B,UAAU,CAAC,CAAC,CACd,CAAC,CAED,KAAM,CAAAW,aAAa,CAAG,KAAO,CAAAH,MAAM,EAAK,CACtC,KAAM,CAAAC,OAAO,CAAGhC,GAAG,CAACL,EAAE,CAAE,OAAO,CAAEoC,MAAM,CAAC,CACxC,KAAM,CAAAhC,SAAS,CAACiC,OAAO,CAAE,CAAEG,OAAO,CAAEvC,SAAS,CAAC,CAAC,CAAE,CAAC,CAAC,CACnD2B,UAAU,CAAC,CAAC,CACd,CAAC,CAED,GAAIN,OAAO,CAAE,CACX,mBACET,IAAA,QAAK4B,SAAS,CAAC,QAAQ,CAAAC,QAAA,cACrB3B,KAAA,QAAK0B,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtB7B,IAAA,QAAK4B,SAAS,CAAC,OAAO,CAAM,CAAC,cAC7B5B,IAAA,QAAK4B,SAAS,CAAC,OAAO,CAAM,CAAC,cAC7B5B,IAAA,QAAK4B,SAAS,CAAC,OAAO,CAAM,CAAC,cAC7B5B,IAAA,QAAK4B,SAAS,CAAC,OAAO,CAAM,CAAC,cAC7B5B,IAAA,QAAK4B,SAAS,CAAC,OAAO,CAAM,CAAC,EAC1B,CAAC,CACH,CAAC,CAEV,CAEA,mBACE1B,KAAA,QAAK0B,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClB3B,KAAA,QAAK0B,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB3B,KAAA,QAAK0B,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrB3B,KAAA,QAAK0B,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtB7B,IAAA,QACE8B,GAAG,CAAEvB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEwB,QAAS,CACpBC,GAAG,CAAEzB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE0B,WAAY,CACvBL,SAAS,CAAC,QAAQ,CACnB,CAAC,cACF1B,KAAA,SAAA2B,QAAA,EAAM,WACK,CAACtB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE0B,WAAW,CAAC,IAAE,CAAC1B,IAAI,SAAJA,IAAI,kBAAAH,oBAAA,CAAJG,IAAI,CAAE2B,cAAc,UAAA9B,oBAAA,iBAApBA,oBAAA,CAAsB+B,UAAU,CAAC,GAClE,EAAM,CAAC,EACJ,CAAC,cACNnC,IAAA,QAAK4B,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnB3B,KAAA,WAAQkC,OAAO,CAAEA,CAAA,GAAM1C,OAAO,CAACR,IAAI,CAAE,CAAC0C,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC7D7B,IAAA,CAACJ,eAAe,EAACyC,IAAI,CAAExC,YAAa,CAAE,CAAC,UACzC,EAAQ,CAAC,CACN,CAAC,EACH,CAAC,CACLQ,KAAK,CAACiC,MAAM,GAAK,CAAC,cACjBtC,IAAA,QAAK4B,SAAS,CAAC,YAAY,CAAAC,QAAA,cACzB7B,IAAA,OAAA6B,QAAA,CAAI,yBAAuB,CAAI,CAAC,CAC7B,CAAC,cAEN7B,IAAA,QAAK4B,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBxB,KAAK,CAACc,GAAG,CAAEoB,IAAI,eACdrC,KAAA,QAAmB0B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtC3B,KAAA,QAAK0B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB7B,IAAA,QACE8B,GAAG,CAAES,IAAI,CAACC,KAAK,CAACC,UAAW,CAC3BT,GAAG,CAAEO,IAAI,CAACC,KAAK,CAACE,KAAM,CACtBd,SAAS,CAAC,aAAa,CACxB,CAAC,cACF1B,KAAA,QAAA2B,QAAA,eACE7B,IAAA,QAAK4B,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEU,IAAI,CAACC,KAAK,CAACE,KAAK,CAAM,CAAC,cACrD1C,IAAA,QAAK4B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAEU,IAAI,CAACI,WAAW,CAAM,CAAC,EACvD,CAAC,EACH,CAAC,cACNzC,KAAA,QAAK0B,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtB3B,KAAA,WACEkC,OAAO,CAAEA,CAAA,GAAMd,UAAU,CAACiB,IAAI,CAACnB,EAAE,CAAE,CACnCQ,SAAS,CAAC,aAAa,CAAAC,QAAA,EACxB,QACO,CAACU,IAAI,CAACd,IAAI,CAAC,GACnB,EAAQ,CAAC,cACTvB,KAAA,WACEkC,OAAO,CAAEA,CAAA,GAAMV,aAAa,CAACa,IAAI,CAACnB,EAAE,CAAE,CACtCQ,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAC3B,WACU,CAACU,IAAI,CAACZ,OAAO,CAAC,GACzB,EAAQ,CAAC,EACN,CAAC,GAzBEY,IAAI,CAACnB,EA0BV,CACN,CAAC,CACC,CACN,EACE,CAAC,cACNpB,IAAA,QAAK4B,SAAS,CAAC,4BAA4B,CAAAC,QAAA,cACzC7B,IAAA,CAACF,SAAS,GAAE,CAAC,CACV,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAK,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}