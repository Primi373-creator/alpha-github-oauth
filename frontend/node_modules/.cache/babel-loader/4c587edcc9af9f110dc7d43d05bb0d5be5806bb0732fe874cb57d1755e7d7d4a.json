{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import\"../css/pair.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Paircd=()=>{const[phoneNumber,setPhoneNumber]=useState(\"+\");const[pairCode,setPairCode]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[connecting,setConnecting]=useState(false);useEffect(()=>{setTimeout(()=>{setLoading(false);},3000);},[]);const handleSubmit=async event=>{event.preventDefault();setConnecting(true);setError(null);if(!phoneNumber){setError(\"Enter your WhatsApp number with a country code\");setConnecting(false);return;}else if(phoneNumber.replace(/[^0-9]/g,\"\").length<11){setError(\"Invalid number format\");setConnecting(false);return;}try{const response=await fetch(\"/server/pair?number=\".concat(phoneNumber.replace(/[^0-9]/g,\"\")));const data=await response.json();setPairCode(data.code||\"Service Unavailable\");}catch(error){console.error(\"Error fetching pairing code:\",error);setError(\"Failed to fetch pairing code. Please try again.\");}finally{setConnecting(false);}};const copyToClipboard=()=>{if(pairCode){navigator.clipboard.writeText(pairCode);}};return/*#__PURE__*/_jsx(\"div\",{className:\"authqr-container\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"authqr-loader\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"authqr-spinner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rect1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rect2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rect3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rect4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rect5\"})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"authqr-form-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"authqr-form\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",className:\"authqr-label\",children:\"Phone Number:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",id:\"phone\",className:\"authqr-input\",value:phoneNumber,onChange:e=>setPhoneNumber(e.target.value),required:true}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"authqr-error\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"authqr-submit-button\",children:\"Get Pairing Code\"}),connecting&&/*#__PURE__*/_jsx(\"div\",{className:\"authqr-connecting\",children:\"Connecting...\"}),pairCode&&!connecting&&/*#__PURE__*/_jsx(\"div\",{className:\"authqr-pairing-section\",children:/*#__PURE__*/_jsx(\"p\",{className:\"authqr-pair-code \".concat(connecting?\"connecting\":\"\"),onClick:copyToClipboard,children:pairCode})})]})})});};export default Paircd;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Paircd","phoneNumber","setPhoneNumber","pairCode","setPairCode","loading","setLoading","error","setError","connecting","setConnecting","setTimeout","handleSubmit","event","preventDefault","replace","length","response","fetch","concat","data","json","code","console","copyToClipboard","navigator","clipboard","writeText","className","children","onSubmit","htmlFor","type","id","value","onChange","e","target","required","onClick"],"sources":["/workspaces/alpha-github-oauth/frontend/src/pages/pair.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"../css/pair.css\";\r\n\r\nconst Paircd = () => {\r\n  const [phoneNumber, setPhoneNumber] = useState(\"+\");\r\n  const [pairCode, setPairCode] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [connecting, setConnecting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      setLoading(false);\r\n    }, 3000);\r\n  }, []);\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    setConnecting(true);\r\n    setError(null);\r\n\r\n    if (!phoneNumber) {\r\n      setError(\"Enter your WhatsApp number with a country code\");\r\n      setConnecting(false);\r\n      return;\r\n    } else if (phoneNumber.replace(/[^0-9]/g, \"\").length < 11) {\r\n      setError(\"Invalid number format\");\r\n      setConnecting(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `/server/pair?number=${phoneNumber.replace(/[^0-9]/g, \"\")}`,\r\n      );\r\n      const data = await response.json();\r\n      setPairCode(data.code || \"Service Unavailable\");\r\n    } catch (error) {\r\n      console.error(\"Error fetching pairing code:\", error);\r\n      setError(\"Failed to fetch pairing code. Please try again.\");\r\n    } finally {\r\n      setConnecting(false);\r\n    }\r\n  };\r\n\r\n  const copyToClipboard = () => {\r\n    if (pairCode) {\r\n      navigator.clipboard.writeText(pairCode);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"authqr-container\">\r\n      {loading ? (\r\n        <div className=\"authqr-loader\">\r\n          <div className=\"authqr-spinner\">\r\n            <div className=\"rect1\"></div>\r\n            <div className=\"rect2\"></div>\r\n            <div className=\"rect3\"></div>\r\n            <div className=\"rect4\"></div>\r\n            <div className=\"rect5\"></div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"authqr-form-container\">\r\n          <form onSubmit={handleSubmit} className=\"authqr-form\">\r\n            <label htmlFor=\"phone\" className=\"authqr-label\">\r\n              Phone Number:\r\n            </label>\r\n            <input\r\n              type=\"tel\"\r\n              id=\"phone\"\r\n              className=\"authqr-input\"\r\n              value={phoneNumber}\r\n              onChange={(e) => setPhoneNumber(e.target.value)}\r\n              required\r\n            />\r\n            {error && <div className=\"authqr-error\">{error}</div>}\r\n            <button type=\"submit\" className=\"authqr-submit-button\">\r\n              Get Pairing Code\r\n            </button>\r\n            {connecting && (\r\n              <div className=\"authqr-connecting\">Connecting...</div>\r\n            )}\r\n            {pairCode && !connecting && (\r\n              <div className=\"authqr-pairing-section\">\r\n                <p\r\n                  className={`authqr-pair-code ${connecting ? \"connecting\" : \"\"}`}\r\n                  onClick={copyToClipboard}\r\n                >\r\n                  {pairCode}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </form>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Paircd;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzB,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACnB,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGR,QAAQ,CAAC,GAAG,CAAC,CACnD,KAAM,CAACS,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACe,UAAU,CAAEC,aAAa,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAEnDC,SAAS,CAAC,IAAM,CACdgB,UAAU,CAAC,IAAM,CACfL,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAM,YAAY,CAAG,KAAO,CAAAC,KAAK,EAAK,CACpCA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtBJ,aAAa,CAAC,IAAI,CAAC,CACnBF,QAAQ,CAAC,IAAI,CAAC,CAEd,GAAI,CAACP,WAAW,CAAE,CAChBO,QAAQ,CAAC,gDAAgD,CAAC,CAC1DE,aAAa,CAAC,KAAK,CAAC,CACpB,OACF,CAAC,IAAM,IAAIT,WAAW,CAACc,OAAO,CAAC,SAAS,CAAE,EAAE,CAAC,CAACC,MAAM,CAAG,EAAE,CAAE,CACzDR,QAAQ,CAAC,uBAAuB,CAAC,CACjCE,aAAa,CAAC,KAAK,CAAC,CACpB,OACF,CAEA,GAAI,CACF,KAAM,CAAAO,QAAQ,CAAG,KAAM,CAAAC,KAAK,wBAAAC,MAAA,CACHlB,WAAW,CAACc,OAAO,CAAC,SAAS,CAAE,EAAE,CAAC,CAC3D,CAAC,CACD,KAAM,CAAAK,IAAI,CAAG,KAAM,CAAAH,QAAQ,CAACI,IAAI,CAAC,CAAC,CAClCjB,WAAW,CAACgB,IAAI,CAACE,IAAI,EAAI,qBAAqB,CAAC,CACjD,CAAE,MAAOf,KAAK,CAAE,CACdgB,OAAO,CAAChB,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACpDC,QAAQ,CAAC,iDAAiD,CAAC,CAC7D,CAAC,OAAS,CACRE,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAED,KAAM,CAAAc,eAAe,CAAGA,CAAA,GAAM,CAC5B,GAAIrB,QAAQ,CAAE,CACZsB,SAAS,CAACC,SAAS,CAACC,SAAS,CAACxB,QAAQ,CAAC,CACzC,CACF,CAAC,CAED,mBACEN,IAAA,QAAK+B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAC9BxB,OAAO,cACNR,IAAA,QAAK+B,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5B9B,KAAA,QAAK6B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BhC,IAAA,QAAK+B,SAAS,CAAC,OAAO,CAAM,CAAC,cAC7B/B,IAAA,QAAK+B,SAAS,CAAC,OAAO,CAAM,CAAC,cAC7B/B,IAAA,QAAK+B,SAAS,CAAC,OAAO,CAAM,CAAC,cAC7B/B,IAAA,QAAK+B,SAAS,CAAC,OAAO,CAAM,CAAC,cAC7B/B,IAAA,QAAK+B,SAAS,CAAC,OAAO,CAAM,CAAC,EAC1B,CAAC,CACH,CAAC,cAEN/B,IAAA,QAAK+B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACpC9B,KAAA,SAAM+B,QAAQ,CAAElB,YAAa,CAACgB,SAAS,CAAC,aAAa,CAAAC,QAAA,eACnDhC,IAAA,UAAOkC,OAAO,CAAC,OAAO,CAACH,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,eAEhD,CAAO,CAAC,cACRhC,IAAA,UACEmC,IAAI,CAAC,KAAK,CACVC,EAAE,CAAC,OAAO,CACVL,SAAS,CAAC,cAAc,CACxBM,KAAK,CAAEjC,WAAY,CACnBkC,QAAQ,CAAGC,CAAC,EAAKlC,cAAc,CAACkC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAChDI,QAAQ,MACT,CAAC,CACD/B,KAAK,eAAIV,IAAA,QAAK+B,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEtB,KAAK,CAAM,CAAC,cACrDV,IAAA,WAAQmC,IAAI,CAAC,QAAQ,CAACJ,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,kBAEvD,CAAQ,CAAC,CACRpB,UAAU,eACTZ,IAAA,QAAK+B,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,eAAa,CAAK,CACtD,CACA1B,QAAQ,EAAI,CAACM,UAAU,eACtBZ,IAAA,QAAK+B,SAAS,CAAC,wBAAwB,CAAAC,QAAA,cACrChC,IAAA,MACE+B,SAAS,qBAAAT,MAAA,CAAsBV,UAAU,CAAG,YAAY,CAAG,EAAE,CAAG,CAChE8B,OAAO,CAAEf,eAAgB,CAAAK,QAAA,CAExB1B,QAAQ,CACR,CAAC,CACD,CACN,EACG,CAAC,CACJ,CACN,CACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAH,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}