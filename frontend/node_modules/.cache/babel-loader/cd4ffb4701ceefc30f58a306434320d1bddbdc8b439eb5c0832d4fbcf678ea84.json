{"ast":null,"code":"import React,{useState}from\"react\";import{db}from\"../firebase\";import{collection,addDoc}from\"firebase/firestore\";import{useNavigate}from\"react-router-dom\";import\"../css/addg.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddGist=()=>{const[newGistUrl,setNewGistUrl]=useState(\"\");const[newGistDescription,setNewGistDescription]=useState(\"\");const[loading,setLoading]=useState(false);const navigate=useNavigate();const handleAddGist=async()=>{if(!newGistUrl||!newGistDescription)return;setLoading(true);try{const gistData=await fetchGistData(newGistUrl);await addDoc(collection(db,\"gists\"),{...gistData,description:newGistDescription,like:0,dislike:0,owner:{login:gistData.owner.login,avatar_url:gistData.owner.avatar_url}});setNewGistUrl(\"\");setNewGistDescription(\"\");navigate(\"/plugins\");}catch(error){console.error(\"Error adding Gist: \",error);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"add-gist\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add a New Gist\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Gist URL\",value:newGistUrl,onChange:e=>setNewGistUrl(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Description\",value:newGistDescription,onChange:e=>setNewGistDescription(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddGist,disabled:loading,children:loading?\"Adding...\":\"Add Gist\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/plugins\"),children:\"Cancel\"}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loader\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"spinner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rect1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rect2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rect3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rect4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rect5\"})]})})]});};const fetchGistData=async gistUrl=>{const response=await fetch(gistUrl);const data=await response.json();return{id:data.id,url:gistUrl,description:data.description,owner:{login:data.owner.login,avatar_url:data.owner.avatar_url}};};export default AddGist;","map":{"version":3,"names":["React","useState","db","collection","addDoc","useNavigate","jsx","_jsx","jsxs","_jsxs","AddGist","newGistUrl","setNewGistUrl","newGistDescription","setNewGistDescription","loading","setLoading","navigate","handleAddGist","gistData","fetchGistData","description","like","dislike","owner","login","avatar_url","error","console","className","children","type","placeholder","value","onChange","e","target","onClick","disabled","gistUrl","response","fetch","data","json","id","url"],"sources":["/workspaces/alpha-github-oauth/frontend/src/pages/AddGist.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { db } from \"../firebase\";\r\nimport { collection, addDoc } from \"firebase/firestore\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"../css/addg.css\";\r\n\r\nconst AddGist = () => {\r\n  const [newGistUrl, setNewGistUrl] = useState(\"\");\r\n  const [newGistDescription, setNewGistDescription] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleAddGist = async () => {\r\n    if (!newGistUrl || !newGistDescription) return;\r\n    setLoading(true);\r\n    try {\r\n      const gistData = await fetchGistData(newGistUrl);\r\n      await addDoc(collection(db, \"gists\"), {\r\n        ...gistData,\r\n        description: newGistDescription,\r\n        like: 0,\r\n        dislike: 0,\r\n        owner: {\r\n          login: gistData.owner.login,\r\n          avatar_url: gistData.owner.avatar_url,\r\n        },\r\n      });\r\n      setNewGistUrl(\"\");\r\n      setNewGistDescription(\"\");\r\n      navigate(\"/plugins\");\r\n    } catch (error) {\r\n      console.error(\"Error adding Gist: \", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"add-gist\">\r\n      <h2>Add a New Gist</h2>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Gist URL\"\r\n        value={newGistUrl}\r\n        onChange={(e) => setNewGistUrl(e.target.value)}\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Description\"\r\n        value={newGistDescription}\r\n        onChange={(e) => setNewGistDescription(e.target.value)}\r\n      />\r\n      <button onClick={handleAddGist} disabled={loading}>\r\n        {loading ? \"Adding...\" : \"Add Gist\"}\r\n      </button>\r\n      <button onClick={() => navigate(\"/plugins\")}>Cancel</button>\r\n      {loading && (\r\n        <div className=\"loader\">\r\n          <div className=\"spinner\">\r\n            <div className=\"rect1\"></div>\r\n            <div className=\"rect2\"></div>\r\n            <div className=\"rect3\"></div>\r\n            <div className=\"rect4\"></div>\r\n            <div className=\"rect5\"></div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst fetchGistData = async (gistUrl) => {\r\n  const response = await fetch(gistUrl);\r\n  const data = await response.json();\r\n  return {\r\n    id: data.id,\r\n    url: gistUrl,\r\n    description: data.description,\r\n    owner: {\r\n      login: data.owner.login,\r\n      avatar_url: data.owner.avatar_url,\r\n    },\r\n  };\r\n};\r\n\r\nexport default AddGist;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}